<lib-input>
  <mat-checkbox [formControl]="form.consentEnabled">
    <ng-container i18n>User Consent Enabled</ng-container>
    <mat-icon libHelp i18n-matTooltip
             matTooltip="Control whether consent is active/inactive for this service.">
    </mat-icon>
    <mat-hint align="end"><lib-hint [difference]="form.consentEnabled.difference()"></lib-hint></mat-hint>
  </mat-checkbox>
</lib-input>

<ng-container *ngIf="form.consentEnabled.value">
  <lib-input>
    <mat-form-field class="textInput" appearance="standard">
      <mat-label i18n>Excluded Attributes</mat-label>
      <mat-select multiple [formControl]="form.excluded">
        <mat-option *ngFor="let opt of formData.availableAttributes(formData.options.attributeRepositories)" [value]="opt">
          {{ opt }}
        </mat-option>
      </mat-select>
      <mat-hint align="end"><lib-hint [difference]="form.excluded.difference()"></lib-hint></mat-hint>
    </mat-form-field>
    <mat-icon libHelp i18n-matTooltip
             matTooltip="Exclude the indicated attributes from consent.">
    </mat-icon>
  </lib-input>
</ng-container>

<ng-container *ngIf="form.consentEnabled.value">
  <lib-input>
    <mat-form-field class="textInput" appearance="standard">
      <mat-label i18n>Include Only Attributes</mat-label>
      <mat-select multiple [formControl]="form.includeOnly">
        <mat-option *ngFor="let opt of formData.availableAttributes(formData.options.attributeRepositories)" [value]="opt">
          {{ opt }}
        </mat-option>
      </mat-select>
      <mat-hint align="end"><lib-hint [difference]="form.includeOnly.difference()"></lib-hint></mat-hint>
    </mat-form-field>
    <mat-icon libHelp i18n-matTooltip
             matTooltip="Force-include the indicated attributes in consent, provided attributes are resolved.">
    </mat-icon>
  </lib-input>
</ng-container>
