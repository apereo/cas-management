<lib-card heading="Chained Policy" *ngIf="typeControl" flex="0 1 550px" class="mt-3">
    <lib-select-input [control]="typeControl" label="Policy" [valueOptions]="types"></lib-select-input>

    <ng-container *ngIf="typeControl.value == TYPE_OPTIONS.SCRIPT">
        <lib-script [form]="form"></lib-script>
    </ng-container>

    <ng-container *ngIf="typeControl.value == TYPE_OPTIONS.GROOVY">
        <lib-groovy [form]="form"></lib-groovy>
    </ng-container>

    <ng-container *ngIf="typeControl.value == TYPE_OPTIONS.RETURN_ALLOWED">
        <lib-allowed [form]="form"></lib-allowed>
    </ng-container>

    <ng-container *ngIf="typeControl.value == TYPE_OPTIONS.RETURN_MAPPED">
        <lib-mapped [form]="form"></lib-mapped>
    </ng-container>

    <ng-container *ngIf="typeControl.value == TYPE_OPTIONS.METADATA" style="padding-top:25px;">
        <lib-metadata-release [form]="form"></lib-metadata-release>
    </ng-container>

    <ng-container *ngIf="typeControl.value == TYPE_OPTIONS.RESTFUL">
        <lib-restful [form]="form"></lib-restful>
    </ng-container>

    <ng-container *ngIf="typeControl.value == TYPE_OPTIONS.GROOVY_SAML">
        <lib-groovy-saml [form]="form"></lib-groovy-saml>
    </ng-container>


    <ng-container *ngIf="typeControl.value !== TYPE_OPTIONS.DENY_ALL">
        <div class="mt-3">
            <h3>Attribute Release Options</h3>
            <lib-attribute-release-checks [form]="form.checks"></lib-attribute-release-checks>
        </div>
        
        <div class="mt-3">
            <h3>Attribute Release Consent</h3>
            <lib-attribute-release-consent [form]="form.consent"></lib-attribute-release-consent>
        </div>

        <div class="mt-3">
            <h3>Attribute Release Consent</h3>
            <lib-attribute-release-filters [form]="form.attributeFilter"></lib-attribute-release-filters>
        </div>

        <div class="mt-3">
            <h3>Principal Attribute Repository</h3>
            <lib-attribute-release-principal-repo [form]="form.principalRepo" [typeControl]="form.principalRepoType"></lib-attribute-release-principal-repo>
        </div>
    </ng-container>
</lib-card>


